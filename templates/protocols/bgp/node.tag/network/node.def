tag:
type: ipv4net
help: Specify a network to announce via BGP
syntax:expression: exec "/opt/vyatta/sbin/vyatta_quagga_utils.pl --check-prefix-boundry $VAR(@)"

commit:expression: !($VAR(./backdoor/) != "" && $VAR(./route-map/) != ""); \
       "May specify route-map or backdoor but not both" 

delete:expression: "touch /tmp/`echo $VAR(@) | sed 's!/!!'`.$PPID"

end:expression: "${vyatta_sbindir}/vyatta-vtysh.pl -noerr         \
       -c \"configure terminal\"                                  \
       -c \"router bgp $VAR(../@)\"                               \
       -c \"no network $VAR(@)\";                                 \
      if [ -f \"/tmp/`echo $VAR(@) | sed 's!/!!'`.$PPID\" ]; then \
        rm -rf /tmp/`echo $VAR(@) | sed 's!/!!'`.$PPID;           \
      else                                                        \
#
# Commenting out until cli bug 2525 is fixed
#
#        if [ -n \"$VAR(./backdoor/)\" ]; then                     
#          COND=\"backdoor\";                                      
#        fi;                                                       
        if [ -n \"$VAR(./route-map/@)\" ]; then                   \
          COND=\"route-map $VAR(./route-map/@)\";                 \
        fi;                                                       \
          ${vyatta_sbindir}/vyatta-vtysh.pl                       \
           -c \"configure terminal\"                              \
           -c \"router bgp $VAR(../@)\"                           \
           -c \"network $VAR(@) $COND\";                          \
      fi; " 
