tag:
priority: 720
type: txt
help: Set a BGP neighbor 
comp_help: 
  <x.x.x.x>           BGP neighbor IP address
  <h:h:h:h:h:h:h:h>   BGP neighbor IPv6 address

syntax:expression: exec "/opt/vyatta/sbin/vyatta-bgp.pl \
                           --check-peer-name $VAR(@)"


create: if /opt/vyatta/sbin/vyatta-bgp.pl --check-if-peer-group \
                                          --peergroup $VAR(@); then
	   vyatta-vtysh --noerr -c "configure terminal"    \
                        -c "router bgp $VAR(../@)" \
                        -c "neighbor $VAR(@) peer-group"; 
        fi;

delete:  /opt/vyatta/sbin/vyatta-bgp.pl --check-peer-groups \
 		--peergroup $VAR(@) --as $VAR(../@) || exit 1
         vyatta-vtysh -c "configure terminal"    \
                      -c "router bgp $VAR(../@)" \
                      -c "no neighbor $VAR(@)"
