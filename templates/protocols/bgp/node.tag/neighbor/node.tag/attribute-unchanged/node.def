help: Set whether BGP attributes are sent unchanged 

commit:expression: exec "/opt/vyatta/sbin/vyatta-bgp.pl --check-as --as $VAR(../../@) --neighbor $VAR(../@)"

commit:expression: $VAR(../peer-group/) == ""; "protocols bgp $VAR(../../@) neighbor $VAR(../@): you can't set attribute-unchanged for a neighbor in a peer-group"

end: if /opt/vyatta/sbin/vyatta-validate-type.pl -q ipv6 $VAR(../@); then  
       vyatta-vtysh --noerror          \
         -c "configure terminal"       \
         -c "router bgp $VAR(../../@)" \
         -c "address-family ipv6"      \
	 -c "neighbor $VAR(../@) activate" \
         -c "no neighbor $VAR(../@) attribute-unchanged "; 
     else 
       vyatta-vtysh --noerror          \
         -c "configure terminal"       \
         -c "router bgp $VAR(../../@)" \
         -c "no neighbor $VAR(../@) attribute-unchanged "; 
     fi

     if [ ${COMMIT_ACTION} = 'SET' -o ${COMMIT_ACTION} = 'ACTIVE' ]; then
       ${vyatta_sbindir}/vyatta-check-typeless-node.pl "protocols bgp $VAR(../../@) neighbor $VAR(../@) attribute-unchanged as-path"
       if [ $? -eq 0 ]; then
          cond="as-path ";
       fi;
       ${vyatta_sbindir}/vyatta-check-typeless-node.pl "protocols bgp $VAR(../../@) neighbor $VAR(../@) attribute-unchanged med"
       if [ $? -eq 0 ]; then
         cond="$cond med ";
       fi;
       ${vyatta_sbindir}/vyatta-check-typeless-node.pl "protocols bgp $VAR(../../@) neighbor $VAR(../@) attribute-unchanged next-hop"
       if [ $? -eq 0 ]; then
         cond="$cond next-hop ";
       fi;
       if [ -n "$VAR(../remote-as/@)" ]; then
         peer="remote-as $VAR(../remote-as/@)";
       else 
         peer="peer-group $VAR(../peer-group/@)"; 
       fi; 

       if /opt/vyatta/sbin/vyatta-validate-type.pl -q ipv6 $VAR(../@); then
         vyatta-vtysh -c "configure terminal" \
           -c "router bgp $VAR(../../@)"      \
	   -c "neighbor $VAR(../@) $peer"     \
           -c "address-family ipv6"           \
           -c "neighbor $VAR(../@) attribute-unchanged $cond"; 
       else
         vyatta-vtysh -c "configure terminal" \
           -c "router bgp $VAR(../../@)"      \
	   -c "neighbor $VAR(../@) $peer"     \
           -c "neighbor $VAR(../@) attribute-unchanged $cond"; 
       fi
     fi
