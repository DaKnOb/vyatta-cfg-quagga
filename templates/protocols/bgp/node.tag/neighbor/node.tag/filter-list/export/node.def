type: txt
help: Set an as-path-list to filter outgoing route updates to this neighbor

allowed: local -a params
        params=( /opt/vyatta/config/active/policy/as-path-list/* )
        echo -n ${params[@]##*/}

comp_help: possible completions:
  <txt>    as-path-list name

commit:expression: exec "/opt/vyatta/sbin/vyatta-bgp.pl --check-as --as $VAR(../../../@) --neighbor $VAR(../../@)"

commit:expression: $VAR(../../peer-group/) == ""; "protocols bgp $VAR(../../../@) neighbor $VAR(../../@): you can't set a filter-list for a neighbor in peer-group"

commit:expression: exec "/opt/vyatta/sbin/vyatta_quagga_utils.pl --exists \"policy as-path-list $VAR(@)\" ";"protocols bgp $VAR(../../../@) neighbor $VAR(../../@) filter-list export: as-path-list $VAR(@) doesn't exist"

update:  if [ -n "$VAR(../../remote-as/@)" ]; then 
           peer="remote-as $VAR(../../remote-as/@)"; 
         else 
           peer="peer-group $VAR(../../peer-group/@)"; 
         fi; 
         if /opt/vyatta/sbin/vyatta-bgp.pl --check-if-peer-group \
                                           --peergroup $VAR(../../@); then
            vyatta-vtysh --noerr -c "configure terminal"    \
                         -c "router bgp $VAR(../../../@)" \
                         -c "neighbor $VAR(../../@) peer-group";
         fi;
         if /opt/vyatta/sbin/vyatta-validate-type.pl -q ipv6 $VAR(../../@); then
           vyatta-vtysh -c "configure terminal"           \
                        -c "router bgp $VAR(../../../@)"  \
                        -c "address-family ipv6"          \
	                -c "neighbor $VAR(../../@) $peer" \
                        -c "address-family ipv6"          \
                        -c "neighbor $VAR(../../@) filter-list $VAR(@) out"
	 else
           vyatta-vtysh -c "configure terminal"           \
                        -c "router bgp $VAR(../../../@)"  \
	                -c "neighbor $VAR(../../@) $peer" \
                        -c "neighbor $VAR(../../@) filter-list $VAR(@) out"
         fi;

delete:   if /opt/vyatta/sbin/vyatta-validate-type.pl -q ipv6 $VAR(../../@); then
            vyatta-vtysh --noerror             \
              -c "configure terminal"          \
              -c "address-family ipv6"         \
              -c "router bgp $VAR(../../../@)" \
              -c "address-family ipv6"         \
              -c "no neighbor $VAR(../../@) filter-list $VAR(@) out"
          else 
            vyatta-vtysh --noerror             \
              -c "configure terminal"          \
              -c "router bgp $VAR(../../../@)" \
              -c "no neighbor $VAR(../../@) filter-list $VAR(@) out"
          fi

