type: txt

help: Set a prefix-list to filter outgoing route updates to this neighbor

allowed: local -a params
        params=(/opt/vyatta/config/active/policy/prefix-list6/*)
        echo -n ${params[@]##*/}

comp_help: possible completions:
  <txt>     prefix-list6 name

commit:expression: exec "/opt/vyatta/sbin/vyatta-bgp.pl --check-as --as $VAR(../../../../@) --neighbor $VAR(../../../@)"

commit:expression: exec "/opt/vyatta/sbin/vyatta_quagga_utils.pl --exists \"policy prefix-list $VAR(@)\" || /opt/vyatta/sbin/vyatta_quagga_utils.pl --exists \"policy prefix-list6 $VAR(@)\""; \
"protocols bgp $VAR(../../../../@) neighbor $VAR(../../../@) address-family $VAR(../../@) prefix-list import: prefix-list $VAR(@) doesn't exist"

commit:expression: $VAR(../../distribute-list/import/) == ""; "protocols bgp $VAR(../../../../@) neighbor $VAR(../../../@) address-family $VAR(../../@) prefix-list import: you can't set both a prefix-list and a distribute list"

update:
	af=$VAR(../../@)
        af=${af%-*}
  	vyatta-vtysh \
	    -c "configure terminal" \
            -c "router bgp $VAR(../../../../@)" \
            -c "address-family $af" \
	    -c "neighbor $VAR(../../../@) activate" \
            -c "neighbor $VAR(../../../@) prefix-list $VAR(@) in"

delete:
	af=$VAR(../../@)
        af=${af%-*}
        vyatta-vtysh --noerror  \
            -c "configure terminal" \
            -c "router bgp $VAR(../../../../@)" \
            -c "address-family $af" \
            -c "no neighbor $VAR(../../../@) prefix-list $VAR(@) in"
