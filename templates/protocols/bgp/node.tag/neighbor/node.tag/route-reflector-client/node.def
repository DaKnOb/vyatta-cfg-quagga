help: Set neighbor as a route reflector client

commit:expression: exec "/opt/vyatta/sbin/vyatta-bgp.pl --check-as --as $VAR(../../@) --neighbor $VAR(../@)"

commit:expression: $VAR(../peer-group/) == ""; "protocols bgp $VAR(../../@) neighbor $VAR(../@): you can't set route-reflector-client for a neighbor in a peer-group"

commit:expression: $VAR(../../@) == $VAR(../remote-as/@); "protocols bgp $VAR(../../@) neighbor $VAR(../@) route-reflector-client: remote-as must equal local-as"

update: if [ -n "$VAR(../remote-as/@)" ]; then 
          peer="remote-as $VAR(../remote-as/@)"; 
        else 
          peer="peer-group $VAR(../peer-group/@)"; 
        fi; 

        if /opt/vyatta/sbin/vyatta-validate-type.pl -q ipv6 $VAR(../@); 
        then
          vyatta-vtysh -c "configure terminal" \
            -c "router bgp $VAR(../../@)"      \
	    -c "neighbor $VAR(../@) $peer"     \
            -c "address-family ipv6"           \
            -c "neighbor $VAR(../@) route-reflector-client"
        else
          vyatta-vtysh -c "configure terminal" \
            -c "router bgp $VAR(../../@)"      \
	    -c "neighbor $VAR(../@) $peer"     \
            -c "neighbor $VAR(../@) route-reflector-client"
        fi

delete: if /opt/vyatta/sbin/vyatta-validate-type.pl -q ipv6 $VAR(../@); 
        then
          vyatta-vtysh --noerror          \
            -c "configure terminal"       \ 
            -c "router bgp $VAR(../../@)" \
            -c "address-family ipv6"      \
            -c "no neighbor $VAR(../@) route-reflector-client"
        else
          vyatta-vtysh --noerror          \
            -c "configure terminal"       \ 
            -c "router bgp $VAR(../../@)" \
            -c "no neighbor $VAR(../@) route-reflector-client"
        fi
