type: u32
help: Set neighbor BGP AS number [REQUIRED]

comp_help: possible completions:
  <1-4294967294>    AS number

syntax:expression: $VAR(@) >= 1 && $VAR(@) <= 4294967294; \
                   "remote-as must be between 1 and 4294967294"

# Create action so this leaf is done before others
create: vtysh -c "configure terminal"       \
                     -c "router bgp $VAR(../../@)" \
                     -c "neighbor $VAR(../@) remote-as $VAR(@)" || exit 1;
        if /opt/vyatta/sbin/vyatta-validate-type.pl -q ipv6 $VAR(../@)
        then
	   vtysh -c "configure terminal"              \
                        -c "router bgp $VAR(../../@)"        \
                        -c "no neighbor $VAR(../@) activate" \
                        -c "address-family ipv6"             \
			-c "neighbor $VAR(../@) activate";
        fi

update: vtysh -c "configure terminal"       \
                     -c "router bgp $VAR(../../@)" \
                     -c "neighbor $VAR(../@) remote-as $VAR(@)" || exit 1;
        if /opt/vyatta/sbin/vyatta-validate-type.pl -q ipv6 $VAR(../@)
        then
	   vtysh -c "configure terminal"              \
                        -c "router bgp $VAR(../../@)"        \
                        -c "no neighbor $VAR(../@) activate" \
                        -c "address-family ipv6"             \
			-c "neighbor $VAR(../@) activate";
        fi

#remote-as needs to be set 1st & deleted last - comment out for now
#delete: vtysh -c "configure terminal"       \
#                     -c "router bgp $VAR(../../@)" \
#                     -c "no neighbor $VAR(../@) remote-as $VAR(@)";
delete: if /opt/vyatta/sbin/vyatta-validate-type.pl -q ipv6 $VAR(../@)
        then
	   vtysh -c "configure terminal"           \
                        -c "router bgp $VAR(../../@)"     \
                        -c "neighbor $VAR(../@) activate" \
                        -c "address-family ipv6"          \
			-c "no neighbor $VAR(../@) activate";
        fi
